var st=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var s=(i,t,e)=>(st(i,t,"read from private field"),e?e.call(i):t.get(i)),l=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},u=(i,t,e,r)=>(st(i,t,"write to private field"),r?r.call(i,e):t.set(i,e),e);var f=(i,t,e)=>(st(i,t,"access private method"),e);import{S as At,s as rt,n as Pt,i as bt,a as _t,t as Lt,f as jt,b as Mt,r as kt,c as $t,h as Bt,d as Tt,g as qt,e as Vt,j as Ft,w as H,k as ft,l as xt,m as Nt,u as Ct,o as zt,p as Rt,q as Kt,v as pt,x as L,y as w,z as S,A as it,B as wt,C as Wt,D as Zt,E as Qt,F as b,G as O,H as Ot,I as Gt,J as Yt,K as Ht,L as Jt}from"./index-DuOBHvrp.js";var g,c,V,y,E,j,k,x,M,$,I,F,R,B,Q,q,N,at,z,nt,K,ot,W,ct,Z,ht,G,lt,Y,ut,J,Dt,It,Xt=(It=class extends At{constructor(t,e){super();l(this,Q);l(this,N);l(this,z);l(this,K);l(this,W);l(this,Z);l(this,G);l(this,Y);l(this,J);l(this,g,void 0);l(this,c,void 0);l(this,V,void 0);l(this,y,void 0);l(this,E,void 0);l(this,j,void 0);l(this,k,void 0);l(this,x,void 0);l(this,M,void 0);l(this,$,void 0);l(this,I,void 0);l(this,F,void 0);l(this,R,void 0);l(this,B,new Set);this.options=e,u(this,g,t),u(this,k,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(s(this,c).addObserver(this),St(s(this,c),this.options)?f(this,Q,q).call(this):this.updateResult(),f(this,W,ct).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return dt(s(this,c),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return dt(s(this,c),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,Z,ht).call(this),f(this,G,lt).call(this),s(this,c).removeObserver(this)}setOptions(t,e){const r=this.options,o=s(this,c);if(this.options=s(this,g).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");f(this,Y,ut).call(this),s(this,c).setOptions(this.options),r._defaulted&&!rt(this.options,r)&&s(this,g).getQueryCache().notify({type:"observerOptionsUpdated",query:s(this,c),observer:this});const a=this.hasListeners();a&&Et(s(this,c),o,this.options,r)&&f(this,Q,q).call(this),this.updateResult(e),a&&(s(this,c)!==o||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&f(this,N,at).call(this);const n=f(this,z,nt).call(this);a&&(s(this,c)!==o||this.options.enabled!==r.enabled||n!==s(this,R))&&f(this,K,ot).call(this,n)}getOptimisticResult(t){const e=s(this,g).getQueryCache().build(s(this,g),t),r=this.createResult(e,t);return ee(this,r)&&(u(this,y,r),u(this,j,this.options),u(this,E,s(this,c).state)),r}getCurrentResult(){return s(this,y)}trackResult(t,e){const r={};return Object.keys(t).forEach(o=>{Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),e==null||e(o),t[o])})}),r}trackProp(t){s(this,B).add(t)}getCurrentQuery(){return s(this,c)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=s(this,g).defaultQueryOptions(t),r=s(this,g).getQueryCache().build(s(this,g),e);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,e))}fetch(t){return f(this,Q,q).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),s(this,y)))}createResult(t,e){var vt;const r=s(this,c),o=this.options,a=s(this,y),n=s(this,E),m=s(this,j),U=t!==r?t.state:s(this,V),{state:C}=t;let h={...C},d=!1,p;if(e._optimisticResults){const v=this.hasListeners(),et=!v&&St(t,e),Ut=v&&Et(t,r,e,o);(et||Ut)&&(h={...h,...Mt(C.data,t.options)}),e._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:A,errorUpdatedAt:T,status:_}=h;if(e.select&&h.data!==void 0)if(a&&h.data===(n==null?void 0:n.data)&&e.select===s(this,x))p=s(this,M);else try{u(this,x,e.select),p=e.select(h.data),p=kt(a==null?void 0:a.data,p,e),u(this,M,p),u(this,k,null)}catch(v){u(this,k,v)}else p=h.data;if(e.placeholderData!==void 0&&p===void 0&&_==="pending"){let v;if(a!=null&&a.isPlaceholderData&&e.placeholderData===(m==null?void 0:m.placeholderData))v=a.data;else if(v=typeof e.placeholderData=="function"?e.placeholderData((vt=s(this,$))==null?void 0:vt.state.data,s(this,$)):e.placeholderData,e.select&&v!==void 0)try{v=e.select(v),u(this,k,null)}catch(et){u(this,k,et)}v!==void 0&&(_="success",p=kt(a==null?void 0:a.data,v,e),d=!0)}s(this,k)&&(A=s(this,k),p=s(this,M),T=Date.now(),_="error");const P=h.fetchStatus==="fetching",X=_==="pending",tt=_==="error",gt=X&&P,mt=p!==void 0;return{status:_,fetchStatus:h.fetchStatus,isPending:X,isSuccess:_==="success",isError:tt,isInitialLoading:gt,isLoading:gt,data:p,dataUpdatedAt:h.dataUpdatedAt,error:A,errorUpdatedAt:T,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>U.dataUpdateCount||h.errorUpdateCount>U.errorUpdateCount,isFetching:P,isRefetching:P&&!X,isLoadingError:tt&&!mt,isPaused:h.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:tt&&mt,isStale:yt(t,e),refetch:this.refetch}}updateResult(t){const e=s(this,y),r=this.createResult(s(this,c),this.options);if(u(this,E,s(this,c).state),u(this,j,this.options),s(this,E).data!==void 0&&u(this,$,s(this,c)),rt(r,e))return;u(this,y,r);const o={},a=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,m=typeof n=="function"?n():n;if(m==="all"||!m&&!s(this,B).size)return!0;const D=new Set(m??s(this,B));return this.options.throwOnError&&D.add("error"),Object.keys(s(this,y)).some(U=>{const C=U;return s(this,y)[C]!==e[C]&&D.has(C)})};(t==null?void 0:t.listeners)!==!1&&a()&&(o.listeners=!0),f(this,J,Dt).call(this,{...o,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,W,ct).call(this)}},g=new WeakMap,c=new WeakMap,V=new WeakMap,y=new WeakMap,E=new WeakMap,j=new WeakMap,k=new WeakMap,x=new WeakMap,M=new WeakMap,$=new WeakMap,I=new WeakMap,F=new WeakMap,R=new WeakMap,B=new WeakMap,Q=new WeakSet,q=function(t){f(this,Y,ut).call(this);let e=s(this,c).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(Pt)),e},N=new WeakSet,at=function(){if(f(this,Z,ht).call(this),bt||s(this,y).isStale||!_t(this.options.staleTime))return;const e=Lt(s(this,y).dataUpdatedAt,this.options.staleTime)+1;u(this,I,setTimeout(()=>{s(this,y).isStale||this.updateResult()},e))},z=new WeakSet,nt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(s(this,c)):this.options.refetchInterval)??!1},K=new WeakSet,ot=function(t){f(this,G,lt).call(this),u(this,R,t),!(bt||this.options.enabled===!1||!_t(s(this,R))||s(this,R)===0)&&u(this,F,setInterval(()=>{(this.options.refetchIntervalInBackground||jt.isFocused())&&f(this,Q,q).call(this)},s(this,R)))},W=new WeakSet,ct=function(){f(this,N,at).call(this),f(this,K,ot).call(this,f(this,z,nt).call(this))},Z=new WeakSet,ht=function(){s(this,I)&&(clearTimeout(s(this,I)),u(this,I,void 0))},G=new WeakSet,lt=function(){s(this,F)&&(clearInterval(s(this,F)),u(this,F,void 0))},Y=new WeakSet,ut=function(){const t=s(this,g).getQueryCache().build(s(this,g),this.options);if(t===s(this,c))return;const e=s(this,c);u(this,c,t),u(this,V,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},J=new WeakSet,Dt=function(t){$t.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(s(this,y))}),s(this,g).getQueryCache().notify({query:s(this,c),type:"observerResultsUpdated"})})},It);function te(i,t){return t.enabled!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&t.retryOnMount===!1)}function St(i,t){return te(i,t)||i.state.data!==void 0&&dt(i,t,t.refetchOnMount)}function dt(i,t,e){if(t.enabled!==!1){const r=typeof e=="function"?e(i):e;return r==="always"||r!==!1&&yt(i,t)}return!1}function Et(i,t,e,r){return(i!==t||r.enabled===!1)&&(!e.suspense||i.state.status!=="error")&&yt(i,e)}function yt(i,t){return t.enabled!==!1&&i.isStaleByTime(t.staleTime)}function ee(i,t){return!rt(i.getCurrentResult(),t)}function se(i=""){if(!Bt())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const t=qt(i),e=Tt(t);if(!e)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return e}function ie(i,t,e){const r=e||se(),o=Vt(()=>{const d=Nt(t);typeof d.enabled=="function"&&(d.enabled=d.enabled());const p=r.defaultQueryOptions(d);return p._optimisticResults=r.isRestoring.value?"isRestoring":"optimistic",p}),a=new i(r,o.value),n=Ft(a.getCurrentResult());let m=()=>{};H(r.isRestoring,d=>{d||(m(),m=a.subscribe(p=>{Ct(n,p)}))},{immediate:!0});const D=()=>{a.setOptions(o.value),Ct(n,a.getCurrentResult())};H(o,D),zt(()=>{m()});const U=(...d)=>(D(),n.refetch(...d)),C=()=>new Promise((d,p)=>{let A=()=>{};const T=()=>{if(o.value.enabled!==!1){a.setOptions(o.value);const _=a.getOptimisticResult(o.value);_.isStale?(A(),a.fetchOptimistic(o.value).then(d,P=>{Rt(o.value.throwOnError,[P,a.getCurrentQuery()])?p(P):d(a.getCurrentResult())})):(A(),d(_))}};T(),A=H(o,T)});H(()=>n.error,d=>{if(n.isError&&!n.isFetching&&Rt(o.value.throwOnError,[d,a.getCurrentQuery()]))throw d});const h=ft(xt(n));for(const d in n)typeof n[d]=="function"&&(h[d]=n[d]);return h.suspense=C,h.refetch=U,h}function re(i,t){return ie(Xt,i,t)}async function ae(i){const t=await fetch(`https://www.thecocktaildb.com/api/json/v1/1/search.php?s=${i}`);if(!t.ok)throw new Error("Failed to fetch cocktail");return(await t.json()).drinks[0]||null}function ne(i){const t=Kt(i);return re({queryKey:["cocktail",t],queryFn:()=>ae(t.value),staleTime:1/0})}const oe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e.spinner_ajPY{transform-origin:center;animation:spinner_AtaB%20.75s%20infinite%20linear}@keyframes%20spinner_AtaB{100%25{transform:rotate(360deg)}}%3c/style%3e%3cpath%20d='M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z'%20opacity='.25'%20/%3e%3cpath%20d='M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z'%20class='spinner_ajPY'%20/%3e%3c/svg%3e",ce={key:0,class:"text-center"},he=b("img",{src:oe,alt:"Loading",width:"100",height:"100"},null,-1),le=b("p",null,"Error:",-1),ue={key:2},de=pt({__name:"BaseLoading",props:{query:{}},setup(i){const t=i,{data:e,error:r,isFetching:o,isError:a}=ft(Ft(t.query));return(n,m)=>L(o)?(w(),S("div",ce,[it(n.$slots,"loading",wt(Wt(n.query)),()=>[he])])):L(a)?(w(),S("div",wt(Zt({key:1},n.query)),[it(n.$slots,"error",{},()=>[le,b("pre",null,O(L(r).message),1)])],16)):L(e)?(w(),S("div",ue,[it(n.$slots,"default",{data:L(e)})])):Qt("",!0)}}),fe={class:"cocktail-details"},pe={class:"cocktail-details__main"},ye={class:"cocktail-details__header"},ge={class:"cocktail-details__heading"},me={class:"cocktail-details__description"},ve={class:"cocktail-details__ingredient-list"},be={key:0,class:"cocktail-details__ingredient"},_e={class:"cocktail-details__image-wrapper"},ke=["src"],Ce=pt({__name:"CocktailDetails",props:{cocktail:{}},setup(i){return(t,e)=>(w(),S("article",fe,[b("div",pe,[b("header",ye,[b("h1",ge,O(t.cocktail.strDrink),1)]),b("main",null,[b("p",me,O(t.cocktail.strCategory)+", "+O(t.cocktail.strAlcoholic)+", "+O(t.cocktail.strGlass),1),b("ul",ve,[(w(),S(Ot,null,Gt(15,r=>(w(),S(Ot,{key:r},[t.cocktail[`strIngredient${r}`]?(w(),S("li",be,O(t.cocktail[`strMeasure${r}`])+" "+O(t.cocktail[`strIngredient${r}`]),1)):Qt("",!0)],64))),64))])])]),b("div",_e,[b("img",{src:t.cocktail.strDrinkThumb,class:"cocktail-details__image",width:"700px",height:"700px"},null,8,ke)])]))}}),Se=pt({__name:"CocktailView",props:{cocktailCode:{}},setup(i){const t=i,{cocktailCode:e}=ft(t),r=ne(e);return(o,a)=>(w(),Yt(de,{query:L(r)},{default:Ht(({data:n})=>[Jt(Ce,{cocktail:n},null,8,["cocktail"])]),_:1},8,["query"]))}});export{Se as default};
