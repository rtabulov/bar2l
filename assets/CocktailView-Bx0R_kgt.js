var st=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var s=(i,t,e)=>(st(i,t,"read from private field"),e?e.call(i):t.get(i)),l=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},u=(i,t,e,r)=>(st(i,t,"write to private field"),r?r.call(i,e):t.set(i,e),e);var f=(i,t,e)=>(st(i,t,"access private method"),e);import{S as Pt,s as at,n as Lt,i as bt,a as kt,t as Mt,f as Bt,b as Tt,r as Ct,c as $t,h as jt,d as qt,g as xt,e as Vt,j as Dt,w as H,k as pt,l as Nt,m as zt,u as Rt,o as Kt,p as wt,q as Wt,v as Zt,x as yt,y as S,z as C,A as E,B as it,C as Ot,D as Gt,E as Yt,F as Ft,G as _,H as O,I as St,J as Ht,K as rt,L as Jt,M as Xt}from"./index-CAIduIjS.js";var g,c,x,y,I,M,k,V,B,T,Q,D,w,$,F,q,N,nt,z,ot,K,ct,W,ht,Z,lt,G,ut,Y,dt,J,Ut,Qt,te=(Qt=class extends Pt{constructor(t,e){super();l(this,F);l(this,N);l(this,z);l(this,K);l(this,W);l(this,Z);l(this,G);l(this,Y);l(this,J);l(this,g,void 0);l(this,c,void 0);l(this,x,void 0);l(this,y,void 0);l(this,I,void 0);l(this,M,void 0);l(this,k,void 0);l(this,V,void 0);l(this,B,void 0);l(this,T,void 0);l(this,Q,void 0);l(this,D,void 0);l(this,w,void 0);l(this,$,new Set);this.options=e,u(this,g,t),u(this,k,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(s(this,c).addObserver(this),Et(s(this,c),this.options)?f(this,F,q).call(this):this.updateResult(),f(this,W,ht).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ft(s(this,c),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ft(s(this,c),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,Z,lt).call(this),f(this,G,ut).call(this),s(this,c).removeObserver(this)}setOptions(t,e){const r=this.options,o=s(this,c);if(this.options=s(this,g).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");f(this,Y,dt).call(this),s(this,c).setOptions(this.options),r._defaulted&&!at(this.options,r)&&s(this,g).getQueryCache().notify({type:"observerOptionsUpdated",query:s(this,c),observer:this});const a=this.hasListeners();a&&It(s(this,c),o,this.options,r)&&f(this,F,q).call(this),this.updateResult(e),a&&(s(this,c)!==o||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&f(this,N,nt).call(this);const n=f(this,z,ot).call(this);a&&(s(this,c)!==o||this.options.enabled!==r.enabled||n!==s(this,w))&&f(this,K,ct).call(this,n)}getOptimisticResult(t){const e=s(this,g).getQueryCache().build(s(this,g),t),r=this.createResult(e,t);return se(this,r)&&(u(this,y,r),u(this,M,this.options),u(this,I,s(this,c).state)),r}getCurrentResult(){return s(this,y)}trackResult(t,e){const r={};return Object.keys(t).forEach(o=>{Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),e==null||e(o),t[o])})}),r}trackProp(t){s(this,$).add(t)}getCurrentQuery(){return s(this,c)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=s(this,g).defaultQueryOptions(t),r=s(this,g).getQueryCache().build(s(this,g),e);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,e))}fetch(t){return f(this,F,q).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),s(this,y)))}createResult(t,e){var _t;const r=s(this,c),o=this.options,a=s(this,y),n=s(this,I),m=s(this,M),A=t!==r?t.state:s(this,x),{state:R}=t;let h={...R},d=!1,p;if(e._optimisticResults){const v=this.hasListeners(),et=!v&&Et(t,e),At=v&&It(t,r,e,o);(et||At)&&(h={...h,...Tt(R.data,t.options)}),e._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:P,errorUpdatedAt:j,status:b}=h;if(e.select&&h.data!==void 0)if(a&&h.data===(n==null?void 0:n.data)&&e.select===s(this,V))p=s(this,B);else try{u(this,V,e.select),p=e.select(h.data),p=Ct(a==null?void 0:a.data,p,e),u(this,B,p),u(this,k,null)}catch(v){u(this,k,v)}else p=h.data;if(e.placeholderData!==void 0&&p===void 0&&b==="pending"){let v;if(a!=null&&a.isPlaceholderData&&e.placeholderData===(m==null?void 0:m.placeholderData))v=a.data;else if(v=typeof e.placeholderData=="function"?e.placeholderData((_t=s(this,T))==null?void 0:_t.state.data,s(this,T)):e.placeholderData,e.select&&v!==void 0)try{v=e.select(v),u(this,k,null)}catch(et){u(this,k,et)}v!==void 0&&(b="success",p=Ct(a==null?void 0:a.data,v,e),d=!0)}s(this,k)&&(P=s(this,k),p=s(this,B),j=Date.now(),b="error");const L=h.fetchStatus==="fetching",X=b==="pending",tt=b==="error",mt=X&&L,vt=p!==void 0;return{status:b,fetchStatus:h.fetchStatus,isPending:X,isSuccess:b==="success",isError:tt,isInitialLoading:mt,isLoading:mt,data:p,dataUpdatedAt:h.dataUpdatedAt,error:P,errorUpdatedAt:j,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>A.dataUpdateCount||h.errorUpdateCount>A.errorUpdateCount,isFetching:L,isRefetching:L&&!X,isLoadingError:tt&&!vt,isPaused:h.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:tt&&vt,isStale:gt(t,e),refetch:this.refetch}}updateResult(t){const e=s(this,y),r=this.createResult(s(this,c),this.options);if(u(this,I,s(this,c).state),u(this,M,this.options),s(this,I).data!==void 0&&u(this,T,s(this,c)),at(r,e))return;u(this,y,r);const o={},a=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,m=typeof n=="function"?n():n;if(m==="all"||!m&&!s(this,$).size)return!0;const U=new Set(m??s(this,$));return this.options.throwOnError&&U.add("error"),Object.keys(s(this,y)).some(A=>{const R=A;return s(this,y)[R]!==e[R]&&U.has(R)})};(t==null?void 0:t.listeners)!==!1&&a()&&(o.listeners=!0),f(this,J,Ut).call(this,{...o,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,W,ht).call(this)}},g=new WeakMap,c=new WeakMap,x=new WeakMap,y=new WeakMap,I=new WeakMap,M=new WeakMap,k=new WeakMap,V=new WeakMap,B=new WeakMap,T=new WeakMap,Q=new WeakMap,D=new WeakMap,w=new WeakMap,$=new WeakMap,F=new WeakSet,q=function(t){f(this,Y,dt).call(this);let e=s(this,c).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(Lt)),e},N=new WeakSet,nt=function(){if(f(this,Z,lt).call(this),bt||s(this,y).isStale||!kt(this.options.staleTime))return;const e=Mt(s(this,y).dataUpdatedAt,this.options.staleTime)+1;u(this,Q,setTimeout(()=>{s(this,y).isStale||this.updateResult()},e))},z=new WeakSet,ot=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(s(this,c)):this.options.refetchInterval)??!1},K=new WeakSet,ct=function(t){f(this,G,ut).call(this),u(this,w,t),!(bt||this.options.enabled===!1||!kt(s(this,w))||s(this,w)===0)&&u(this,D,setInterval(()=>{(this.options.refetchIntervalInBackground||Bt.isFocused())&&f(this,F,q).call(this)},s(this,w)))},W=new WeakSet,ht=function(){f(this,N,nt).call(this),f(this,K,ct).call(this,f(this,z,ot).call(this))},Z=new WeakSet,lt=function(){s(this,Q)&&(clearTimeout(s(this,Q)),u(this,Q,void 0))},G=new WeakSet,ut=function(){s(this,D)&&(clearInterval(s(this,D)),u(this,D,void 0))},Y=new WeakSet,dt=function(){const t=s(this,g).getQueryCache().build(s(this,g),this.options);if(t===s(this,c))return;const e=s(this,c);u(this,c,t),u(this,x,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},J=new WeakSet,Ut=function(t){$t.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(s(this,y))}),s(this,g).getQueryCache().notify({query:s(this,c),type:"observerResultsUpdated"})})},Qt);function ee(i,t){return t.enabled!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&t.retryOnMount===!1)}function Et(i,t){return ee(i,t)||i.state.data!==void 0&&ft(i,t,t.refetchOnMount)}function ft(i,t,e){if(t.enabled!==!1){const r=typeof e=="function"?e(i):e;return r==="always"||r!==!1&&gt(i,t)}return!1}function It(i,t,e,r){return(i!==t||r.enabled===!1)&&(!e.suspense||i.state.status!=="error")&&gt(i,e)}function gt(i,t){return t.enabled!==!1&&i.isStaleByTime(t.staleTime)}function se(i,t){return!at(i.getCurrentResult(),t)}function ie(i=""){if(!jt())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const t=xt(i),e=qt(t);if(!e)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return e}function re(i,t,e){const r=e||ie(),o=Vt(()=>{const d=zt(t);typeof d.enabled=="function"&&(d.enabled=d.enabled());const p=r.defaultQueryOptions(d);return p._optimisticResults=r.isRestoring.value?"isRestoring":"optimistic",p}),a=new i(r,o.value),n=Dt(a.getCurrentResult());let m=()=>{};H(r.isRestoring,d=>{d||(m(),m=a.subscribe(p=>{Rt(n,p)}))},{immediate:!0});const U=()=>{a.setOptions(o.value),Rt(n,a.getCurrentResult())};H(o,U),Kt(()=>{m()});const A=(...d)=>(U(),n.refetch(...d)),R=()=>new Promise((d,p)=>{let P=()=>{};const j=()=>{if(o.value.enabled!==!1){a.setOptions(o.value);const b=a.getOptimisticResult(o.value);b.isStale?(P(),a.fetchOptimistic(o.value).then(d,L=>{wt(o.value.throwOnError,[L,a.getCurrentQuery()])?p(L):d(a.getCurrentResult())})):(P(),d(b))}};j(),P=H(o,j)});H(()=>n.error,d=>{if(n.isError&&!n.isFetching&&wt(o.value.throwOnError,[d,a.getCurrentQuery()]))throw d});const h=pt(Nt(n));for(const d in n)typeof n[d]=="function"&&(h[d]=n[d]);return h.suspense=R,h.refetch=A,h}function ae(i,t){return re(te,i,t)}async function ne(i){var e;const t=await Wt("/search.php",{query:{s:i}});if(!((e=t.drinks)!=null&&e.length))throw new Error("Not found");return t.drinks[0]??null}function oe(i){const t=Zt(i);return ae({queryKey:["cocktail",t],queryFn:()=>ne(t.value),staleTime:1/0})}const ce="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e.spinner_ajPY{transform-origin:center;animation:spinner_AtaB%20.75s%20infinite%20linear}@keyframes%20spinner_AtaB{100%25{transform:rotate(360deg)}}%3c/style%3e%3cpath%20d='M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z'%20opacity='.25'%20/%3e%3cpath%20d='M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z'%20class='spinner_ajPY'%20/%3e%3c/svg%3e",he={key:0,class:"text-center"},le=_("img",{src:ce,alt:"Loading",width:"100",height:"100"},null,-1),ue=_("p",null,"Error:",-1),de={key:2},fe=yt({__name:"BaseLoading",props:{query:{}},setup(i){const t=i,{data:e,error:r,isFetching:o,isError:a}=pt(Dt(t.query));return(n,m)=>S(o)?(C(),E("div",he,[it(n.$slots,"loading",Ot(Gt(n.query)),()=>[le])])):S(a)?(C(),E("div",Ot(Yt({key:1},n.query)),[it(n.$slots,"error",{},()=>[ue,_("pre",null,O(S(r).message),1)])],16)):S(e)?(C(),E("div",de,[it(n.$slots,"default",{data:S(e)})])):Ft("",!0)}}),pe={class:"cocktail-details"},ye={class:"cocktail-details__main"},ge={class:"cocktail-details__header"},me={class:"cocktail-details__heading"},ve={class:"cocktail-details__description"},_e={class:"cocktail-details__ingredient-list"},be={key:0,class:"cocktail-details__ingredient"},ke={class:"cocktail-details__image-wrapper"},Ce=["src"],Re=yt({__name:"CocktailDetails",props:{cocktail:{}},setup(i){return(t,e)=>(C(),E("article",pe,[_("div",ye,[_("header",ge,[_("h1",me,O(t.cocktail.strDrink),1)]),_("main",null,[_("p",ve,O(t.cocktail.strCategory)+", "+O(t.cocktail.strAlcoholic)+", "+O(t.cocktail.strGlass),1),_("ul",_e,[(C(),E(St,null,Ht(15,r=>(C(),E(St,{key:r},[t.cocktail[`strIngredient${r}`]?(C(),E("li",be,O(t.cocktail[`strMeasure${r}`])+" "+O(t.cocktail[`strIngredient${r}`]),1)):Ft("",!0)],64))),64))])])]),_("div",ke,[_("img",{src:t.cocktail.strDrinkThumb,class:"cocktail-details__image",width:"700px",height:"700px"},null,8,Ce)])]))}}),Ee=yt({__name:"CocktailView",props:{cocktailCode:{}},setup(i){const t=i,{cocktailCode:e}=pt(t),r=oe(e);return(o,a)=>(C(),rt(fe,{query:S(r)},{default:Jt(({data:n})=>[(C(),rt(Xt,null,[(C(),rt(Re,{key:S(e),cocktail:n},null,8,["cocktail"]))],1024))]),_:1},8,["query"]))}});export{Ee as default};
